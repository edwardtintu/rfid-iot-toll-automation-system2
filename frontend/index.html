<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HTMS - Hybrid Toll Management System</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- Sidebar Navigation -->
  <aside class="sidebar">
    <div class="logo">
      <i class="fas fa-road"></i>
      <h2>HTMS</h2>
    </div>
    <nav class="nav-menu">
      <a href="index.html" class="nav-link active">
        <i class="fas fa-chart-line"></i>
        <span>Dashboard</span>
      </a>
      <a href="readers.html" class="nav-link">
        <i class="fas fa-microchip"></i>
        <span>Reader Trust</span>
      </a>
      <a href="decisions.html" class="nav-link">
        <i class="fas fa-brain"></i>
        <span>Decision Telemetry</span>
      </a>
      <a href="blockchain.html" class="nav-link">
        <i class="fas fa-link"></i>
        <span>Blockchain Audit</span>
      </a>
      <a href="manual-entry.html" class="nav-link">
        <i class="fas fa-edit"></i>
        <span>Manual Entry</span>
      </a>
      <a href="toll-processing.html" class="nav-link">
        <i class="fas fa-exchange-alt"></i>
        <span>Toll Processing</span>
      </a>
      <a href="reader-management.html" class="nav-link">
        <i class="fas fa-cog"></i>
        <span>Reader Management</span>
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="top-header">
      <div class="header-left">
        <button class="menu-toggle">
          <i class="fas fa-bars"></i>
        </button>
        <h1>Dashboard</h1>
      </div>
      <div class="header-right">
        <div class="status-indicator">
          <i class="fas fa-circle"></i>
          <span id="backend-status">Connecting...</span>
        </div>
        <div class="user-profile">
          <i class="fas fa-user-circle"></i>
          <span>Admin</span>
        </div>
      </div>
    </header>

    <!-- Stats Cards -->
    <section class="stats-section">
      <div class="stats-grid">
        <div class="stat-card primary">
          <div class="stat-icon">
            <i class="fas fa-exchange-alt"></i>
          </div>
          <div class="stat-info">
            <h3>Total Transactions</h3>
            <p id="total-events">0</p>
          </div>
          <div class="stat-change positive">
            <i class="fas fa-arrow-up"></i>
            <span>+12%</span>
          </div>
        </div>

        <div class="stat-card success">
          <div class="stat-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-info">
            <h3>Allowed</h3>
            <p id="allowed">0</p>
          </div>
          <div class="stat-change positive">
            <i class="fas fa-arrow-up"></i>
            <span>+8%</span>
          </div>
        </div>

        <div class="stat-card danger">
          <div class="stat-icon">
            <i class="fas fa-times-circle"></i>
          </div>
          <div class="stat-info">
            <h3>Blocked</h3>
            <p id="blocked">0</p>
          </div>
          <div class="stat-change negative">
            <i class="fas fa-arrow-down"></i>
            <span>-3%</span>
          </div>
        </div>

        <div class="stat-card warning">
          <div class="stat-icon">
            <i class="fas fa-microchip"></i>
          </div>
          <div class="stat-info">
            <h3>Active Readers</h3>
            <p id="active-readers">0</p>
          </div>
          <div class="stat-change neutral">
            <i class="fas fa-minus"></i>
            <span>0%</span>
          </div>
        </div>

        <div class="stat-card info">
          <div class="stat-icon">
            <i class="fas fa-user-slash"></i>
          </div>
          <div class="stat-info">
            <h3>Suspended Readers</h3>
            <p id="suspended-readers">0</p>
          </div>
          <div class="stat-change neutral">
            <i class="fas fa-minus"></i>
            <span>0%</span>
          </div>
        </div>

        <div class="stat-card secondary">
          <div class="stat-icon">
            <i class="fas fa-database"></i>
          </div>
          <div class="stat-info">
            <h3>Blockchain Queue</h3>
            <p id="blockchain-pending">0</p>
          </div>
          <div class="stat-change neutral">
            <i class="fas fa-clock"></i>
            <span>Pending</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Charts and Data Section -->
    <section class="data-section">
      <div class="row">
        <div class="col-md-8">
          <!-- System Status Card -->
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-server"></i> System Status</h2>
              <div class="card-actions">
                <button class="btn btn-sm btn-outline">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="system-status-grid" id="system-info">
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-server"></i>
                  </div>
                  <div class="status-details">
                    <h4>Backend</h4>
                    <p class="status-value">Loading...</p>
                  </div>
                </div>
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-database"></i>
                  </div>
                  <div class="status-details">
                    <h4>Database</h4>
                    <p class="status-value">Loading...</p>
                  </div>
                </div>
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-link"></i>
                  </div>
                  <div class="status-details">
                    <h4>Blockchain</h4>
                    <p class="status-value">Loading...</p>
                  </div>
                </div>
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-sliders-h"></i>
                  </div>
                  <div class="status-details">
                    <h4>Simulation</h4>
                    <p class="status-value">Loading...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Recent Transactions -->
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-history"></i> Recent Transactions</h2>
              <div class="card-actions">
                <button class="btn btn-sm btn-outline">
                  <i class="fas fa-filter"></i>
                </button>
                <button class="btn btn-sm btn-primary">
                  <i class="fas fa-plus"></i> New
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="transactions-list" id="recent-transactions">
                <div class="empty-state">
                  <i class="fas fa-spinner fa-spin"></i>
                  <p>Loading transactions...</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <!-- Reader Trust Status -->
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-shield-alt"></i> Reader Trust Status</h2>
              <div class="card-actions">
                <button class="btn btn-sm btn-outline">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="readers-list" id="reader-trust-info">
                <div class="empty-state">
                  <i class="fas fa-spinner fa-spin"></i>
                  <p>Loading reader trust status...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Blockchain Status -->
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-link"></i> Blockchain Status</h2>
              <div class="card-actions">
                <button class="btn btn-sm btn-success" id="sync-btn">
                  <i class="fas fa-sync-alt"></i> Sync
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="blockchain-status" id="blockchain-status">
                <div class="status-item">
                  <h4>Pending Events</h4>
                  <p class="status-value">0</p>
                </div>
                <div class="status-item">
                  <h4>Status</h4>
                  <p class="status-value">Synced</p>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 100%;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="js/common.js"></script>
  <script src="js/app.js"></script>
  <script>
    // Toggle sidebar on mobile
    document.querySelector('.menu-toggle').addEventListener('click', function() {
      document.querySelector('.sidebar').classList.toggle('collapsed');
      document.querySelector('.main-content').classList.toggle('sidebar-collapsed');
    });

    // Add active class to current page
    const currentPage = window.location.pathname.split('/').pop();
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
      if (link.getAttribute('href') === currentPage) {
        link.classList.add('active');
      }
    });

    // Add click handlers for sync button
    document.getElementById('sync-btn').addEventListener('click', function() {
      if (window.triggerSync) {
        window.triggerSync();
      }
    });
  </script>
</body>
</html>