<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Government Toll Management System - Ministry of Transport</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- Sidebar Navigation -->
  <aside class="sidebar">
    <div class="logo">
      <i class="fas fa-balance-scale"></i>
      <h2>Hybrid Toll Management System</h2>
    </div>
    <nav class="nav-menu">
      <a href="index.html" class="nav-link active">
        <i class="fas fa-chart-line"></i>
        <span>Dashboard</span>
      </a>
      <a href="readers.html" class="nav-link">
        <i class="fas fa-microchip"></i>
        <span>Reader Trust</span>
      </a>
      <a href="decisions.html" class="nav-link">
        <i class="fas fa-brain"></i>
        <span>Decision Telemetry</span>
      </a>
      <a href="blockchain.html" class="nav-link">
        <i class="fas fa-link"></i>
        <span>Blockchain Audit</span>
      </a>
      <a href="manual-entry.html" class="nav-link">
        <i class="fas fa-edit"></i>
        <span>Manual Entry</span>
      </a>
      <a href="toll-processing.html" class="nav-link">
        <i class="fas fa-exchange-alt"></i>
        <span>Toll Processing</span>
      </a>
      <a href="reader-management.html" class="nav-link">
        <i class="fas fa-cog"></i>
        <span>Reader Management</span>
      </a>
          <a href="admin-settings.html" class="nav-link">
        <i class="fas fa-user-shield"></i>
        <span>Admin Settings</span>
      </a>    </nav>
    
    <!-- User Profile Section -->
    <div class="sidebar-user">
      <div class="sidebar-user-avatar">A</div>
      <div class="sidebar-user-info">
        <h4 class="sidebar-user-name">Admin User</h4>
        <p class="sidebar-user-role">System Administrator</p>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="top-header">
      <div class="header-left">
        <button class="menu-toggle">
          <i class="fas fa-bars"></i>
        </button>
        <div class="header-title">
          Hybrid Toll Management System
        </div>
      </div>
      <div class="header-right">
        <div class="status-indicator">
          <i class="fas fa-circle"></i>
          <span id="backend-status">Connecting...</span>
        </div>
        <button class="theme-toggle" id="theme-toggle">
          <i class="fas fa-moon"></i>
        </button>
        <div class="user-profile">
          <i class="fas fa-user-circle"></i>
          <span>Admin</span>
        </div>
      </div>
    </header>

    <!-- Stats Cards -->
    <section class="stats-section">
      <div class="stats-grid">
        <div class="stat-card primary">
          <div class="stat-icon">
            <i class="fas fa-exchange-alt"></i>
          </div>
          <div class="stat-info">
            <h3>Total Transactions</h3>
            <p id="total-events">0</p>
          </div>
          <div class="stat-change positive">
            <i class="fas fa-arrow-up"></i>
            <span>+12%</span>
          </div>
        </div>

        <div class="stat-card success">
          <div class="stat-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-info">
            <h3>Allowed</h3>
            <p id="allowed">0</p>
          </div>
          <div class="stat-change positive">
            <i class="fas fa-arrow-up"></i>
            <span>+8%</span>
          </div>
        </div>

        <div class="stat-card danger">
          <div class="stat-icon">
            <i class="fas fa-times-circle"></i>
          </div>
          <div class="stat-info">
            <h3>Blocked</h3>
            <p id="blocked">0</p>
          </div>
          <div class="stat-change negative">
            <i class="fas fa-arrow-down"></i>
            <span>-3%</span>
          </div>
        </div>

        <div class="stat-card warning">
          <div class="stat-icon">
            <i class="fas fa-microchip"></i>
          </div>
          <div class="stat-info">
            <h3>Active Readers</h3>
            <p id="active-readers">0</p>
          </div>
          <div class="stat-change neutral">
            <i class="fas fa-minus"></i>
            <span>0%</span>
          </div>
        </div>

        <div class="stat-card info">
          <div class="stat-icon">
            <i class="fas fa-user-slash"></i>
          </div>
          <div class="stat-info">
            <h3>Suspended Readers</h3>
            <p id="suspended-readers">0</p>
          </div>
          <div class="stat-change neutral">
            <i class="fas fa-minus"></i>
            <span>0%</span>
          </div>
        </div>

        <div class="stat-card secondary">
          <div class="stat-icon">
            <i class="fas fa-database"></i>
          </div>
          <div class="stat-info">
            <h3>Blockchain Queue</h3>
            <p id="blockchain-pending">0</p>
          </div>
          <div class="stat-change neutral">
            <i class="fas fa-clock"></i>
            <span>Pending</span>
          </div>
        </div>
      </div>
      
      <!-- Quick Actions -->
      <div class="quick-actions">
        <div class="card">
          <div class="card-header">
            <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
          </div>
          <div class="card-body">
            <div class="actions-grid">
              <button class="action-btn primary">
                <i class="fas fa-plus"></i>
                <span>Add Reader</span>
              </button>
              <button class="action-btn success">
                <i class="fas fa-sync-alt"></i>
                <span>Sync Blockchain</span>
              </button>
              <button class="action-btn warning">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Review Flags</span>
              </button>
              <button class="action-btn info">
                <i class="fas fa-chart-bar"></i>
                <span>Generate Report</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Charts and Data Section -->
    <section class="data-section">
      <div class="row">
        <div class="col-md-8">
          <!-- System Status Card -->
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-server"></i> System Status</h2>
              <div class="card-actions">
                <button class="btn btn-sm btn-outline">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="system-status-grid" id="system-info">
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-server"></i>
                  </div>
                  <div class="status-details">
                    <h4>Backend</h4>
                    <p class="status-value">Loading...</p>
                  </div>
                </div>
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-database"></i>
                  </div>
                  <div class="status-details">
                    <h4>Database</h4>
                    <p class="status-value">Loading...</p>
                  </div>
                </div>
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-link"></i>
                  </div>
                  <div class="status-details">
                    <h4>Blockchain</h4>
                    <p class="status-value">Loading...</p>
                  </div>
                </div>
                <div class="status-item">
                  <div class="status-icon">
                    <i class="fas fa-sliders-h"></i>
                  </div>
                  <div class="status-details">
                    <h4>Simulation</h4>
                    <p class="status-value">Loading...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Recent Transactions -->
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-history"></i> Recent Transactions</h2>
              <div class="card-actions">
                <button class="btn btn-sm btn-outline">
                  <i class="fas fa-filter"></i>
                </button>
                <button class="btn btn-sm btn-primary">
                  <i class="fas fa-plus"></i> New
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="transactions-table">
                  <thead>
                    <tr>
                      <th>Time</th>
                      <th>Reader</th>
                      <th>Decision</th>
                      <th>Confidence</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody id="recent-transactions">
                    <tr>
                      <td colspan="5" class="text-center">
                        <div class="empty-state">
                          <i class="fas fa-spinner fa-spin"></i>
                          <p>Loading transactions...</p>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <!-- Reader Trust Status -->
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-shield-alt"></i> Reader Trust Status</h2>
              <div class="card-actions">
                <button class="btn btn-sm btn-outline">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="readers-list" id="reader-trust-info">
                <div class="empty-state">
                  <i class="fas fa-spinner fa-spin"></i>
                  <p>Loading reader trust status...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Blockchain Status -->
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-link"></i> Blockchain Status</h2>
              <div class="card-actions">
                <button class="btn btn-sm btn-success" id="sync-btn">
                  <i class="fas fa-sync-alt"></i> Sync
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="blockchain-status" id="blockchain-status">
                <div class="status-item">
                  <h4>Pending Events</h4>
                  <p class="status-value">0</p>
                </div>
                <div class="status-item">
                  <h4>Status</h4>
                  <p class="status-value">Synced</p>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 100%;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer for government branding -->
  <footer style="position: fixed; bottom: 0; width: 100%; background: #0f2a4d; color: white; text-align: center; padding: 10px; font-size: 12px; z-index: 1000; border-top: 2px solid #005ea2;">
    <div style="display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; padding: 0 20px;">
      <div>Ministry of Transport & Highways</div>
      <div>Â© 2026 Government of India - Hybrid Toll Management System</div>
      <div>Secure â€¢ Confidential â€¢ Official</div>
    </div>
  </footer>
  
  <script src="js/common.js"></script>
  <script src="js/app.js"></script>
  <script>
    // Toggle sidebar on mobile
    document.querySelector('.menu-toggle').addEventListener('click', function() {
      document.querySelector('.sidebar').classList.toggle('collapsed');
      document.querySelector('.main-content').classList.toggle('sidebar-collapsed');
    });

    // Add active class to current page
    const currentPage = window.location.pathname.split('/').pop();
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
      if (link.getAttribute('href') === currentPage) {
        link.classList.add('active');
      }
    });

    // Add click handlers for sync button
    document.getElementById('sync-btn').addEventListener('click', function() {
      if (window.triggerSync) {
        window.triggerSync();
      }
    });
    
    // Theme toggle functionality
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = themeToggle.querySelector('i');
    
    // Check for saved theme preference or respect OS preference
    const savedTheme = localStorage.getItem('theme');
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    
    if (savedTheme === 'dark' || (!savedTheme && prefersDarkScheme.matches)) {
      document.documentElement.setAttribute('data-theme', 'dark');
      themeIcon.classList.remove('fa-moon');
      themeIcon.classList.add('fa-sun');
    } else {
      document.documentElement.setAttribute('data-theme', 'light');
      themeIcon.classList.remove('fa-sun');
      themeIcon.classList.add('fa-moon');
    }
    
    themeToggle.addEventListener('click', function() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      
      if (currentTheme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'light');
        themeIcon.classList.remove('fa-sun');
        themeIcon.classList.add('fa-moon');
        localStorage.setItem('theme', 'light');
      } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeIcon.classList.remove('fa-moon');
        themeIcon.classList.add('fa-sun');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // Quick actions functionality
    document.querySelectorAll('.action-btn').forEach(button => {
      button.addEventListener('click', function() {
        const action = this.querySelector('span').textContent;
        
        switch(action) {
          case 'Add Reader':
            window.location.href = 'reader-management.html';
            break;
          case 'Sync Blockchain':
            document.getElementById('sync-btn').click();
            break;
          case 'Review Flags':
            window.location.href = 'decisions.html';
            break;
          case 'Generate Report':
            // Show in-page notification instead of alert
            const notification = document.createElement('div');
            notification.className = 'notification notification-info';
            notification.innerHTML = `
              <i class="fas fa-info-circle"></i>
              <span>Report generation would start here...</span>
              <button class="close-notification">&times;</button>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
              notification.remove();
            }, 3000);
            
            // Add close functionality
            notification.querySelector('.close-notification').addEventListener('click', () => {
              notification.remove();
            });
            break;
          default:
            console.log('Unknown action:', action);
        }
      });
    });
  </script>
</body>
</html>
